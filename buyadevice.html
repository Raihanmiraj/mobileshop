<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Buy A Device</title>
        <script src="assets/js/variable.js"></script>
        <link href="assets/css/spinner.css" rel="stylesheet" />
        <link href="assets/css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="assets/css/darkmode.css">
        <script src="assets/js/all.min.js" crossorigin="anonymous"></script>
        <script src="assets/js/jquery.min.js"></script>
 
         </head>
    <body class="sb-nav-fixed">
 
      <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="index.html">MobileShop</a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"> <svg class="svg-inline--fa fa-bars fa-w-14" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" role="img" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></button>
        <!-- Navbar Search-->
        <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
            <div class="input-group">
                <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
            </div>
        </form> 
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="darkMode" checked="">
             
          </div>
        <!-- Navbar-->
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><svg class="svg-inline--fa fa-user fa-w-14 fa-fw" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></svg></a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="maintenance.html">Settings</a></li>
                    <li><a class="dropdown-item" href="maintenance.html">Activity Log</a></li>
                    <li><hr class="dropdown-divider" /></li>
                    <li><a class="dropdown-item" href="maintenance.html">Logout</a></li>
                </ul>
            </li>
        </ul>
    </nav>        
<div class="loading-overlay">
        <span class="fas fa-spinner fa-3x fa-spin"></span>
      </div>







        
        <div id="layoutSidenav">
            

<div id="layoutSidenav_nav">
  <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
    <div class="sb-sidenav-menu">
        <div class="nav">
            <div class="sb-sidenav-menu-heading">Core</div>
            <a class="nav-link" href="index.html">
                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                Dashboard
            </a>
            <div class="sb-sidenav-menu-heading">Add Category</div>
          
            <a class="nav-link" href="buyadevice.html">
                <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
              Buy A Device
            </a>

            <a class="nav-link" href="selladevice.html">
                <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
              Sell A Device
            </a>
           

  
            
 
           
            
        </div>
    </div>
   
</nav>
            </div>            <div id="layoutSidenav_content">
                <main>              
                    <div class="container-fluid px-4">
      

                     
               

<!-- form  -->


<div id='preview'></div>
<div class="row justify-content-center">
                    <div class="col-md-6">

                    <!-- class="row g-3"                                           -->
<form  class="row g-3 needs-validation" novalidate>

<div class="card text-center">
  <div class="card-header">Buyer Information</div>
</div>


  <div class="col-md-6">
    <label for="c_name" class="form-label">Customer's Name</label>
    <input type="text" name="c_name"   class="form-control" id="c_name"  required>
  </div>
  <div class="col-md-6">
    <label for="c_phone" class="form-label">Phone Number</label>
    <input type="text" name="c_phone"  class="form-control" id="c_phone"   required>
  </div>

  <div class="col-md-6">
    <label for="c_nid" class="form-label">NID Card No</label>
    <input type="text" name="c_nid" class="form-control" id="c_nid" >
  </div>
  <div class="col-md-6">
    <label for="c_bdris" class="form-label">Birth-Certificate No</label>
    <input type="text" name="c_bdris" class="form-control" id="c_bdris"  >
  </div>

  <div class="col-12">
    <label for="c_address" class="form-label">Address</label>
    <input type="text" name="c_address" class="form-control" id="c_address"   required>
  </div>

<!-- data picker -->
 
    <div class="col-md-6">
        <label for="c_birthdate"  class="form-label">Customer's Birthdate</label>
        <input name="c_birthdate" class="form-control"  id="c_birthdate" type="date"  data-date-split-input="true" />
   </div>
   <div class="col-md-6">
    <label for="c_email" class="form-label">Customer's Email</label>
    <input type="email" name="c_email" class="form-control" id="c_email" >
  </div>
    

 
   <div id="attchedfile"  style=" position: relative;" class="mb-3">
    <div id="loader"></div>
  <label for="c_attached" class="form-label">Attatched Necessary File</label>
  <input name="c_attached" onchange="babe()" class="form-control" type="file" id="c_attached" multiple>
</div>



<div class="card text-center">
  <div class="card-header">Mobile Details</div>
</div>
 
<div class="mobileform" style="height: 100%;width:100%">
 
  <div class="col-12">
    <label for="m_model" class="form-label ">Model No</label>
    <input type="text" name="m_model" class="form-control m_model" id="m_model"  required>
  </div>
  <div class="row">
  <div class="col-md-6">
    <label for="m_imei1" class="form-label ">IMEI NO 1</label>
    <input type="text" name="m_imei1" class="form-control m_imei1" id="m_imei1"  required>
  </div>
  <div class="col-md-6">
    <label for="m_imei2" class="form-label">IMEI NO 2</label>
    <input type="text" name="m_imei2" class="form-control m_imei2" id="m_imei2"   >
  </div>

  </div>
  

 <div class="row">
  <div class="col-md-4">
    <label for="m_ram" class="form-label">Ram</label>
    <select class="form-select m_ram" aria-label="Default select example" name="m_ram" id="m_ram"   required>
  
  <option value="1">1GB</option>
  <option  value="2">2GB</option>
  <option value="3">3GB</option>
  <option selected value="4">4GB</option>
  <option value="6">6GB</option>
  <option value="8">8GB</option>
  <option value="12">12GB</option>
</select>
    
    <div class="valid-feedback">
      Looks good!
    </div>
  </div>


  <div class="col-md-4">
    <label for="m_rom" class="form-label">Rom</label>
    <select class="form-select m_rom" aria-label="Default select example"  name="m_rom" id="m_rom"   required>
 
  <option value="4">4GB</option>
  <option value="8">8GB</option>
  <option  value="16">16GB</option>
  <option value="32">32GB</option>
  <option selected value="64">64GB</option>
  <option value="128">128GB</option>
  <option value="256">256GB</option>
  <option value="512">512GB</option>
</select>
    <!-- <input type="text" class="form-control"  name="m_rom" id="m_rom"   required> -->
    <div class="valid-feedback">
      Looks good!
    </div>
  </div>

  <div class="col-md-4">
    <label for="m_price" class="form-label">Price</label>
    <input type="text" class="form-control m_price"  name="m_price" id="m_price"   required>
   
  </div>
  </div>
  </div>



  <button type="button" id="adddevice" class="btn btn-secondary">Add Another Device</button>

<div class="card text-center">
  <div class="card-header">Recommendator</div>
</div>
 

  <div class="col-md-6">
    <label for="r_name" class="form-label">Recommendator's Name</label>
    <input type="text" name="r_name" class="form-control" id="r_name" >
  </div>
  <div class="col-md-6">
    <label for="r_phone" class="form-label">Recommendator's Phone No</label>
    <input type="text" name="r_phone" class="form-control" id="r_phone"   >
  </div>
  <div class="col-12">
    <label for="r_address" class="form-label">Recommendator's Address</label>
    <input type="text" name="r_address" class="form-control" id="r_address"  >
  </div>

  <div class="col-12">
    <button type="submit" id="submit" class="btn btn-primary">Update</button>
  </div>
</form>  

 
</div> </div>



<!-- Button trigger modal -->
<button type="button" id="clickTheButton" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" hidden>
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Seller Data</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>



    </div>
                </main>
                <footer class="py-4 footerbg t mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; MobileShop 2021</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>            </div>
        </div>

      
<script>
var isUploadDone = 0;
let overlay = document.getElementsByClassName('loading-overlay')[0];
 
</script>



<script>
 var arrayOfAjax = []
function babe(){
  $("#loader").toggleClass("loader");
 var files = $("#c_attached")[0].files;
  for(var i =0 ;i<files.length;i++){

 
$("#attchedfile").append("<div class='text-muted' style='text-align:center;font-size:10px'>"+files[i].name+" Has Uploaded</div>")
 

 
    $.ajax({
                type: 'put',
                url: storageUrl+'/' +files[i].name+'?rootId=' + uploadFolderPath ,
                data: files[i],
                processData: false,
                contentType: false,
                success: function (msg) {
                   console.log(msg);
                  
                   arrayOfAjax.push(msg);
                   
                 
                  //  $("#attchedfile").append("<h6>"+$("#c_attached")[0].files[i].name+" Has Uploaded</h6>")
                },
                error: function (err) {
                    console.log(err)   
                    // $("#attchedfile").append("<h6>"+files[i].name+" Has Failed</h6>")
                } 
        
            });

          
            console.log(i); console.log(files.length);
          }

  }

var formsubmit=0;



$(document).ready(function(){


  $(document).ajaxStop(function(){
    if(isUploadDone==0){
      $("#loader").toggleClass("loader");
    
      isUploadDone=1;
    }
  console.log(arrayOfAjax);
  });






  (function () {
  formsubmit=0;
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }else{
           formsubmit=1;
        }

        form.classList.add('was-validated')
      }, false)
    })
})()

    $("#adddevice").click(function(){
 
$(".mobileform").append('<div class="col-12"> <label for="m_model" class="form-label ">Model No</label> <input type="text" name="m_model" class="form-control m_model" id="m_model" required> </div><div class="row"> <div class="col-md-6"> <label for="m_imei1" class="form-label ">IMEI NO 1</label> <input type="text" name="m_imei1" class="form-control m_imei1" id="m_imei1" required> </div><div class="col-md-6"> <label for="m_imei2" class="form-label">IMEI NO 2</label> <input type="text" name="m_imei2" class="form-control m_imei2" id="m_imei2" > </div></div><div class="row"> <div class="col-md-4"> <label for="m_ram" class="form-label">Ram</label> <select class="form-select m_ram" aria-label="Default select example" name="m_ram" id="m_ram" required> <option value="1">1GB</option> <option value="2">2GB</option> <option value="3">3GB</option> <option selected value="4">4GB</option> <option value="6">6GB</option> <option value="8">8GB</option> <option value="12">12GB</option></select> <div class="valid-feedback"> Looks good! </div></div><div class="col-md-4"> <label for="m_rom" class="form-label ">Rom</label> <select class="form-select m_rom" aria-label="Default select example" name="m_rom" id="m_rom" required> <option value="4">4GB</option> <option value="8">8GB</option> <option value="16">16GB</option> <option value="32">32GB</option> <option selected value="64">64GB</option> <option value="128">128GB</option> <option value="256">256GB</option> <option value="512">512GB</option></select> <div class="valid-feedback"> Looks good! </div></div><div class="col-md-4"> <label for="m_price" class="form-label">Price</label> <input type="text" class="form-control m_price"   name="m_price" id="m_price" required> </div></div></div>') ;  
})



  $("form").submit(function(event){
    event.preventDefault();
  
    





console.log(formsubmit);

 if($("#c_attached")[0].files.length == 0){
  isUploadDone=1;
 }


    if(formsubmit==1 && isUploadDone==1){
      overlay.classList.toggle('is-active');
      var mobiledevice = 0;
        var mobileinfo = [];
        var m_mobile=  $(".m_model");
     var m_imei1=  $(".m_imei1");
     var m_imei2=  $(".m_imei2");
     var m_ram=  $(".m_ram");
     var m_rom=  $(".m_rom");
     var m_price=  $(".m_price");
      var c_name = $("#c_name").val();
 var c_phone = $("#c_phone").val();
 var c_nid = $("#c_nid").val();
 var c_bdris = $("#c_bdris").val();
 var c_address = $("#c_address").val();
 var c_birthdate = $("#c_birthdate").val();
 var c_email = $("#c_email").val();
 
 
 var r_name = $("#r_name").val();
 var r_phone = $("#r_phone").val();
 var r_address = $("#r_address").val();
var recommendator = {
  name:r_name,
  phone:r_phone,
  address:r_address
} 



    
for(var i=0;i<m_mobile.length;i++){
  var  m_imei1value =   m_imei1[i].value
  var  m_mobilevalue =  m_mobile[i].value
  var  m_imei2value =   m_imei2[i].value
  var  m_ramvalue =   m_ram[i].value
  var  m_romvalue =   m_rom[i].value
  var  m_pricevalue =   m_price[i].value
 var mobile = {
   m_id : i,
   m_mobile:  m_mobilevalue,
      m_imei1: m_imei1value ,
      m_imei2: m_imei2value,
      m_ram:  m_ramvalue,
      m_rom:  m_romvalue,
      m_price: m_pricevalue  ,
      m_sold:0
 }
 
mobileinfo.push(mobile);
}

  
 
 var attachedFile = Array();
var form_data = new FormData();

// Read selected files
var totalfiles = document.getElementById('c_attached').files.length;
for (var index = 0; index < totalfiles; index++) {
   form_data.append("files[]", document.getElementById('c_attached').files[index]);
    attachedFile[index] = document.getElementById('c_attached').files[index].name;
    
 } 
 
 var customer = {
   name : c_name,
   phone: c_phone,
   nid: c_nid,
   bdris: c_bdris,
   address: c_address,
   birthdate: c_birthdate,
   email: c_email,
   attached :  attachedFile
 }

 console.log(customer);
 console.log(mobileinfo);
 
console.log(recommendator);
// customer = JSON.stringify(customer);
// mobile = JSON.stringify(mobileinfo);
// recommendator = JSON.stringify(recommendator);
// form_data.append("customer",customer);
 
// form_data.append("mobile",mobile);
// form_data.append("recommendator",recommendator);
// form_data.append("type",1);
var currentdate = new Date(); 
datetime =  currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + "  "  
                + currentdate.toLocaleTimeString('en-US')

var datatoupdate = {
  customer_info: customer,
  mobile_info:mobileinfo,
  recommendator_info: recommendator,
  other:null,
  type:1,
  date:datetime
}
 
datatoupdate = JSON.stringify(datatoupdate);
 
// AJAX request
$.ajax({
  // url: 'buyerdatasubmit.php', 
  
  url:   databaseUrl+'buyer.json',
  type: 'post',
  data: datatoupdate,
  dataType: 'json',
  contentType: false,
  processData: false,
  success: function (response){
    $(".modal-body").html("Seller Data Has Submitted");
    
    $("#clickTheButton").click();
    overlay.classList.toggle('is-active');
  //  if(response==1){
     
  //  }
 
    // console.log(response);
  }
});



    }else{
  
        $(".modal-body").html("File Is Uploading Wait");
    
    $("#clickTheButton").click();
 
    
    }




   
  });
});

 


 </script>

 
        <script src="assets/js/darkmode.js"></script>
        <script src="assets/js/bootstrap.js" crossorigin="anonymous"></script>
        <script src="assets/js/scripts.js"></script>
 
</html>
